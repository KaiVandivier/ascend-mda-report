<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <style type="text/css"></style>
  </head>
  <body class="p-5">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <div id="root">
      <h1>Hello world!</h1>

      <table id="table1" class="table">
        <thead id="thead">
          <tr id="header-row">
            <!-- Script will populate col headers here -->
          </tr>
        </thead>
        <tbody id="tbody">
          <!-- Script will populate rows here -->
        </tbody>
      </table>

      <div>BGG coverage: <span id="bcg"></span></div>
      <div>FIC coverage: <span id="fic"></span></div>
    </div>
    <!-- jQuery script -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript">
      jQuery(document).ready(function () {
        console.log("Document ready");

        const root = $( "#root" );
        console.log(root);

        root.append("<h2>I'm a subtitle!</h2>");

        $.get(
          "https://play.dhis2.org/2.33.4/api/analytics?dimension=dx:FnYCr2EAzWS;eTDtyyaSA7f&dimension=pe:THIS_YEAR&filter=ou:ImspTQPwCqd",
          (json) => {
            console.log(json);
            $( "#bcg" ).html( json.rows[0][2] );
            $( "#fic" ).html( json.rows[1][2] );
          }
        );


        /* Populate the table */
        const columns = ["col1", "col2", "col3", "col4"];
        const rows = ["row1", "row2", "row3", "row4"];

        // Set up column headers
        $("#header-row").append(`<th scope="col">Row</th>`)
        columns.forEach(col => {
          $("#header-row").append(`<th scope=col>${col}</th>`);
        });

        // Populate table body
        const tbody = $("#tbody");
        rows.forEach((row) => {
          const newRow = $(`<tr id=${row}></tr>`);
          tbody.append(newRow);
          newRow.append(`<th scope="row">${row}</th>`)
          columns.forEach((col) => {
            newRow.append(`<td>${row} ${col}</td>`);
          })
        })
        





      });
    </script>
  </body>
</html>
